@model IEnumerable<HistoricBattles.Models.Stage>
@inject HistoricBattles.Services.BattleServices BattleServices;

@{
    ViewData["Title"] = "Pavia";
    Layout = "~/Views/Shared/_Layout.cshtml";

}



<header>
    <p id="initialD">@Model.Single(x => x.Id == 1020).DescriptionG</p>
</header>
<div class="container" id="battle">
    <div class="row">
        <div class="col-md-1">
            <img />
        </div>
        <div class="col-md-10 col-sm-4" id="article">
            <img src="~/images/ImagesHome/Bailen.jpg" id="bailenMap" alt="Bailen_battle" title="Plano de Bailen" hidden />
            <img src="~/images/regimientos/Rgto_fran_art.jpg" id="rgtoartfra" alt="artfra" title="Regimiento ArtilleríaF" hidden />
            <img src="~/images/regimientos/Rgto_fran_chi.jpg" id="rgtochifra" alt="chifra" title="Regimiento de CaballeríaF" hidden />
            <img src="~/images/regimientos/Rgto_fran_inf.jpg" id="rgtoinffra" alt="inffra" title="Regimiento de InfanteríaF" hidden />
            <img src="~/images/regimientos/Rgto_spa_art.jpg" id="rgtoartspa" alt="artspa" title="Regimiento ArtilleríaS" hidden />
            <img src="~/images/regimientos/Rgto_spa_chiv.jpg" id="rgtochispa" alt="chispa" title="Regimiento de CaballeríaS" hidden />
            <img src="~/images/regimientos/Rgto_spa_inf.jpg" id="rgtoinfspa" alt="infspa" title="Regimiento de InfanteríaS" hidden />
            <canvas id="battleMap" width="970" height="500" style="border:2px solid black;"></canvas>
        </div>
        <div class="col-md-1">
            <img />
        </div>
    </div>
</div>
<div class="container" id="description">
    <div class="row">
        <div class="col-md-3 col-sm-1">
            <p id="asideleft">@Model.Single(x => x.Id == 1020).DescriptionE2</p>
        </div>
        <div class="col-md-6 col-sm-3">

        </div>
        <div class="col-md-3 col-sm-1">
            <p id="asideright">@Model.Single(x => x.Id == 1020).DescriptionE1</p>
        </div>
    </div>
</div>

<footer>
    <input id="FstStage_btn" type="button" value="Primera Fase" />
    <script>
        $('#FstStage_btn').click(function () {
            $('#initialD').show("slow", function () {
                    @Model.Single(x => x.Id == 1021).DescriptionG
            });

            $('#asideleft').show("slow", function () {
                    @Model.Single(x => x.Id == 1021).DescriptionE2
            });

            $('#asideright').show("slow", function () {
                    @Model.Single(x => x.Id == 1021).DescriptionE1
            });

            ctx.clearRect(0, 0, 970, 500);


        });
    </script>

    <input id="SndStage_btn" type="button" value="Segunda Fase" />
    <script>

    </script>
    <input id="TrdStage_btn" type="button" value="Tercera Fase" />
    <script>

    </script>
    <input id="FthStage_btn" type="button" value="Cuarta Fase" />
    <script>

    </script>
    <input id="FithStage_btn" type="button" value="Quinta Fase" />
    <script>

    </script>
</footer>

<div>
    <a asp-action="Index">Back to List</a>
</div>

<script>
    window.onload = function () {
        var canvas = document.getElementById("battleMap");
        var ctx = canvas.getContext("2d");
        var img = document.getElementById("bailenMap");
        ctx.drawImage(img, 200, 0, 800, 500, 0, 0, 970, 500);

        ctx.font = '24px Comic Sans';
        ctx.fillStyle = "#ff0000";
        ctx.fillText('Bailén', 850, 200);
        ctx.fillText('Haza Walona', 550, 485);
        ctx.fillText('San Valentín', 550, 25);
        ctx.fillText('A Ándujar', 15, 300);

        @{
            List<Regiment> regiments = BattleServices.GetRegimentsDB();

            @foreach (Regiment regiment in regiments)
            {
                if(@regiment.Image == "Rgto_fran_art.jpg")
                {
                    <text>ctx.drawImage(rgtoartfra, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
                else if(@regiment.Image == "Rgto_fran_chi.jpg")
                {
                    <text>ctx.drawImage(rgtochifra, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
                else if(@regiment.Image == "Rgto_fran_inf.jpg")
                {
                    <text>ctx.drawImage(rgtoinffra, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
                else if(@regiment.Image == "Rgto_spa_art.jpg")
                {
                    <text>ctx.drawImage(rgtoartspa, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
                else if(@regiment.Image == "Rgto_spa_chiv.jpg")
                {
                    <text>ctx.drawImage(rgtochispa, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
                else if(@regiment.Image == "Rgto_spa_inf.jpg")
                {
                    <text>ctx.drawImage(rgtoinfspa, 0, 0, 72, 72,</text>@regiment.PosX <text>,</text>@regiment.PosY <text>, 15, 15);</text>
                }
             }
        }
        ctx.save();

    };


</script>